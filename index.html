<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Giphy</title>
</head>
<body>
   
        <button data-food="burger">Burger</button>
        <button data-food="steak">Steak</button>
        <button data-food="burrito">Burrito</button>
        <button data-food="pizza">Pizza</button>
        <button data-food="taco">Taco</button>
 

    <div id="gifs-appear-here">
    </div>
    <div id="topics"></div>
    <button>Add Food: </button>
    <input type="text" id="userInput">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script type="text/javascript">

    var topics = [];
  
    function foodButtons () {
        for (var i = 0; i < topics.length; i++) {
        document.getElementById("topics").innerHTML += "<button>" + topics[i] + "</button>";
            }
        }
    foodButtons();
    
    $("button").on("click", function() {
      var food = $(this).attr("data-food");
      var queryURL = "https://api.giphy.com/v1/gifs/search?api_key=6kzr50l8dlgEaOOVqe1VMiOwUmuGt3p6&q=" 
      + food + "&limit=10&offset=0&lang=en";
    
      $.ajax({
        url: queryURL,
        method: "GET"
      })
        .then(function(response) {
          var results = response.data;

          for (var i = 0; i < results.length; i++) {
            var gifDiv = $("<div>");

            var rating = results[i].rating;

            var p = $("<p>").text("Rating: " + rating);
            //   1. get the value form the <input>, “hit: use .val();”
            // 2. after get the<input> value, add it into the topics[]
            // 3. onclick call foodbuttons();
            // 4. make the button functional add attr data-food to each button

            $("#userInput").val("")
            var userInput = document.getElementById("userInput").value;
            topics.push(userInput);
            var inputValue = "";
            for (i = 0; i<topics.length; i++){
                inputValue = inputValue + topics[i];
                document.getElementById("userInput").innerHTML = inputValue;
            };

            gifDiv.prepend(p);
            gifDiv.prepend(`<img src = "${results[i].images.downsized_still.url}" 
                    data-still="${results[i].images.downsized_still.url}" 
                    data-animate="${results[i].images.downsized.url} " data-state="still" class = "gif ">`);

            $("#gifs-appear-here").prepend(gifDiv);
                }
          
            $("#gifs-appear-here").on("click",".gif", function(){
                   
                var state = $(this).attr("data-state");

                if(state == "still"){
                    var animateImgAddress = $(this).attr("data-animate");
                        $(this).attr("src", animateImgAddress);
                        $(this).attr("data-state”,“animate");
                    }else{
                    var animateImgAddress = $(this).attr("data-still");
                        $(this).attr("src", animateImgAddress);
                        $(this).attr("data-state","still");
                    }
            });
        });
    });
  </script>
</body>
</html>